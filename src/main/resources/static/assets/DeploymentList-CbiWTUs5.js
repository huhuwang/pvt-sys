import{j as f,r as g,k as U,c as w,b as t,l as A,t as F,w as o,n as y,V as r,d as m,o as B,p as d,q as H}from"./index-9ZKT_yQe.js";const O={__name:"DeploymentList",setup(J){const v=H(),l=f({total:0,currentPage:1,pageSize:10}),x=g(!1),R=g(),C=g(),i=async()=>{x.value=!0;const{pageSize:n,currentPage:e}=l;let p=g(k.data);p.value.pageSize=n,p.value.pageNum=e,await y.post("deployment/page",p.value).then(a=>{l.total=a.totalRecordNum,C.value=a.data}).catch(a=>{r.modal.message({content:a,status:"error"})}).finally(()=>{x.value=!1})},b=({pageSize:n,currentPage:e})=>{l.currentPage=e,l.pageSize=n,i()},I=n=>{r.modal.confirm({title:"操作提示",content:"请您确认是否删除？",onConfirm:()=>{y.delete(`deployment/delete/${n}`,{}).then(e=>{r.modal.message({content:"删除成功",status:"success"}),i()}).catch(e=>{r.modal.message({content:e,status:"error"})})}})},_=n=>{const e={deploymentId:n};v.push({name:"update-deployment",state:e})},P=n=>{y.get(`download/rt?deploymentId=${n.id}`).then(e=>{r.saveFile({filename:`RT-${n.applicationName}`,type:"xlsx",content:e})}).catch(e=>{r.modal.message({content:e,status:"error"})})},T=n=>{r.modal.alert({title:"重要提示",content:"正在开发中...有点难度",status:"warning"})},N=n=>{const e={deploymentId:n.id};v.push({name:"add-ticket",state:e})},E=n=>{const e={deploymentId:n.id};v.push({name:"base-case-relate",state:e})},V=f({name:"VxeSelect",options:[{label:"--请选择--",value:null},{label:"IRECRUIT2.0",value:"IRECRUIT2.0"},{label:"IRECRUIT1.0",value:"IRECRUIT1.0"},{label:"CAT",value:"CAT"},{label:"AI INTERVIEW",value:"AI INTERVIEW"}]}),k=f({data:{deploymentDateFrom:null,deploymentDateEnd:null,applicationName:null,deploymentName:null},items:[{field:"deploymentDateFrom",title:"发布时间",span:8,itemRender:{name:"VxeDatePicker"}},{field:"deploymentDateEnd",title:"-",span:8,itemRender:{name:"VxeDatePicker"}},{field:"applicationName",title:"应用",span:8,itemRender:V},{field:"deploymentName",title:"发布名称",span:8,itemRender:{name:"VxeInput"}},{span:8,itemRender:{name:"VxeButtonGroup",options:[{type:"submit",content:"搜索",status:"primary"},{type:"reset",content:"重置"}]}}]}),D={submit(){l.currentPage=1,i()},reset(){i()}};return U(()=>{i()}),(n,e)=>{const p=m("vxe-form"),a=m("vxe-button"),S=m("vxe-toolbar"),c=m("vxe-column"),z=m("vxe-table"),$=m("vxe-pager");return B(),w("div",null,[t(p,A(k,F(D)),null,16),t(S,null,{buttons:o(()=>[t(a,{status:"primary","router-link":{name:"add-deployment"}},{default:o(()=>e[2]||(e[2]=[d("新增")])),_:1})]),_:1}),t(z,{border:"",ref_key:"tableRef",ref:R,height:"550",loading:x.value,"row-config":{isCurrent:!0,isHover:!0},data:C.value},{default:o(()=>[t(c,{title:"发布时间",field:"deploymentDate"}),t(c,{title:"应用",field:"applicationName"}),t(c,{title:"发布名称",field:"deploymentName"}),t(c,{title:"action",width:"340"},{default:o(({row:s})=>[t(a,{mode:"text",status:"error",onClick:u=>I(s.id)},{default:o(()=>e[3]||(e[3]=[d("删除")])),_:2},1032,["onClick"]),t(a,{mode:"text",onClick:u=>_(s.id)},{default:o(()=>e[4]||(e[4]=[d("修改")])),_:2},1032,["onClick"]),t(a,{mode:"text",content:"ticket"},{dropdowns:o(()=>[t(a,{mode:"text",onClick:u=>N(s)},{default:o(()=>e[5]||(e[5]=[d("查看ticket")])),_:2},1032,["onClick"]),t(a,{mode:"text",onClick:u=>E(s)},{default:o(()=>e[6]||(e[6]=[d("关联common")])),_:2},1032,["onClick"])]),_:2},1024),t(a,{mode:"text",content:"导出case"},{dropdowns:o(()=>[t(a,{mode:"text",onClick:u=>P(s)},{default:o(()=>e[7]||(e[7]=[d("RT")])),_:2},1032,["onClick"]),t(a,{mode:"text",onClick:u=>T(s)},{default:o(()=>e[8]||(e[8]=[d("PVT")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["loading","data"]),t($,{currentPage:l.currentPage,"onUpdate:currentPage":e[0]||(e[0]=s=>l.currentPage=s),pageSize:l.pageSize,"onUpdate:pageSize":e[1]||(e[1]=s=>l.pageSize=s),total:l.total,layouts:["Home","PrevJump","PrevPage","Number","NextPage","NextJump","End","Sizes","FullJump","Total"],onPageChange:b},null,8,["currentPage","pageSize","total"])])}}};export{O as default};
