import{r,j as z,f as F,w as u,d as i,o as D,b as l,a as L,p,e as q,q as W,n as j,V as N}from"./index-Bcze8WgH.js";import{_ as S}from"./LoginOut-cJFqAwEf.js";const G={__name:"BaseCaseAdd",setup(H){const h=W(),R=r("0"),w=r("0"),y=r("0"),T=r("0"),V=r("0"),_=r("0"),k=r("0"),g=r("0");let U=r(!1);const o=r({description:null,summary:null,expectedResult:null,step:null,type:2,priority:8,category:null,rtFlow:null}),v=()=>{const b=Number(R.value),e=Number(w.value),x=Number(y.value),f=Number(T.value),n=Number(V.value),a=Number(_.value),c=Number(k.value),d=Number(g.value);n>0||a>0?U.value=!0:U.value=!1;let s=[];b>0&&s.push(b),e>0&&s.push(e),x>0&&s.push(x),f>0&&s.push(f),n>0&&s.push(n),a>0&&s.push(a),c>0&&s.push(c),d>0&&s.push(d),o.value.category=s.join()},B=z({envList:[{validator(){if(!o.value.category)return new Error("this field is required")}}],rtFlow:[{validator(){if((Number(V.value)>0||Number(_.value)>0)&&!o.value.rtFlow)return new Error("this field is required")}}]}),A=()=>{j.post("case/base/add",o.value).then(b=>{N.modal.message({content:"保存成功",status:"success"}),C()}).catch(b=>{N.modal.message({content:b,status:"error"})})},C=()=>{h.push({name:"home-page",query:{at:"baseCase"}})};return(b,e)=>{const x=i("vxe-layout-header"),f=i("vxe-textarea"),n=i("vxe-form-item"),a=i("vxe-option"),c=i("vxe-select"),d=i("vxe-checkbox"),s=i("vxe-button"),E=i("vxe-form"),I=i("vxe-layout-body"),P=i("vxe-layout-container");return D(),F(P,{vertical:""},{default:u(()=>[l(x,{fixed:"",style:{"background-color":"#a6c9ed"}},{default:u(()=>[l(S)]),_:1}),l(I,null,{default:u(()=>[L("div",null,[l(E,{vertical:"",data:o.value,onSubmit:A,rules:B},{default:u(()=>[l(n,{title:"description",field:"description",span:"24","item-render":{}},{default:u(t=>[l(f,{modelValue:o.value.description,"onUpdate:modelValue":e[0]||(e[0]=m=>o.value.description=m),placeholder:"case description",autosize:{minRows:2,maxRows:10}},null,8,["modelValue"])]),_:1}),l(n,{title:"summary",field:"summary",span:"24","item-render":{}},{default:u(()=>[l(f,{modelValue:o.value.summary,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.summary=t),placeholder:"case summary",autosize:{minRows:2,maxRows:10}},null,8,["modelValue"])]),_:1}),l(n,{title:"expected result",field:"expectedResult",span:"24","item-render":{}},{default:u(t=>[l(f,{modelValue:o.value.expectedResult,"onUpdate:modelValue":e[2]||(e[2]=m=>o.value.expectedResult=m),placeholder:"expected result",autosize:{minRows:2,maxRows:10}},null,8,["modelValue"])]),_:1}),l(n,{title:"step",field:"step",span:"24","item-render":{}},{default:u(t=>[l(f,{modelValue:o.value.step,"onUpdate:modelValue":e[3]||(e[3]=m=>o.value.step=m),placeholder:"step",autosize:{minRows:2,maxRows:10}},null,8,["modelValue"])]),_:1}),l(n,{title:"Priority",field:"priority",span:"24","item-render":{}},{default:u(t=>[l(c,{modelValue:o.value.priority,"onUpdate:modelValue":e[4]||(e[4]=m=>o.value.priority=m),placeholder:"priority",size:"medium"},{default:u(()=>[l(a,{value:1,label:"Urgent"}),l(a,{value:2,label:"Highest"}),l(a,{value:3,label:"High"}),l(a,{value:4,label:"Low"}),l(a,{value:5,label:"Lowest"}),l(a,{value:6,label:"Blocker"}),l(a,{value:7,label:"Critical"}),l(a,{value:8,label:"Major"}),l(a,{value:9,label:"Minor"}),l(a,{value:10,label:"Trivial"})]),_:1},8,["modelValue"])]),_:1}),l(n,{title:"适用场景",field:"envList",span:"24","item-render":{}},{default:u(()=>[l(d,{modelValue:R.value,"onUpdate:modelValue":e[5]||(e[5]=t=>R.value=t),"checked-value":"17","unchecked-value":"0",onChange:v},{default:u(()=>e[14]||(e[14]=[p("SIT-WEB")])),_:1},8,["modelValue"]),l(d,{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=t=>w.value=t),"checked-value":"33","unchecked-value":"0",onChange:v},{default:u(()=>e[15]||(e[15]=[p("SIT-IPAD")])),_:1},8,["modelValue"]),l(d,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=t=>y.value=t),"checked-value":"18","unchecked-value":"0",onChange:v},{default:u(()=>e[16]||(e[16]=[p("UAT-WEB")])),_:1},8,["modelValue"]),l(d,{modelValue:T.value,"onUpdate:modelValue":e[8]||(e[8]=t=>T.value=t),"checked-value":"34","unchecked-value":"0",onChange:v},{default:u(()=>e[17]||(e[17]=[p("UAT-IPAD")])),_:1},8,["modelValue"]),l(d,{modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=t=>V.value=t),"checked-value":"20","unchecked-value":"0",onChange:v},{default:u(()=>e[18]||(e[18]=[p("RT-WEB")])),_:1},8,["modelValue"]),l(d,{modelValue:_.value,"onUpdate:modelValue":e[10]||(e[10]=t=>_.value=t),"checked-value":"36","unchecked-value":"0",onChange:v},{default:u(()=>e[19]||(e[19]=[p("RT-IPAD")])),_:1},8,["modelValue"]),l(d,{modelValue:k.value,"onUpdate:modelValue":e[11]||(e[11]=t=>k.value=t),"checked-value":"24","unchecked-value":"0",onChange:v},{default:u(()=>e[20]||(e[20]=[p("PVT-WEB")])),_:1},8,["modelValue"]),l(d,{modelValue:g.value,"onUpdate:modelValue":e[12]||(e[12]=t=>g.value=t),"checked-value":"40","unchecked-value":"0",onChange:v},{default:u(()=>e[21]||(e[21]=[p("PVT-IPAD")])),_:1},8,["modelValue"])]),_:1}),l(n,{title:"RT模板",field:"rtFlow",span:"24","item-render":{},visible:q(U)},{default:u(t=>[l(c,{modelValue:o.value.rtFlow,"onUpdate:modelValue":e[13]||(e[13]=m=>o.value.rtFlow=m),placeholder:"RT模板",size:"medium"},{default:u(()=>[l(a,{value:"RT1",label:"RT1"}),l(a,{value:"RT2",label:"RT2"}),l(a,{value:"RT3",label:"RT3"}),l(a,{value:"RT4",label:"RT4"}),l(a,{value:"RT5",label:"RT5"}),l(a,{value:"RT6",label:"RT6"}),l(a,{value:"RT7",label:"RT7"}),l(a,{value:"RT8",label:"RT8"})]),_:1},8,["modelValue"])]),_:1},8,["visible"]),l(n,{align:"center",span:"24","item-render":{}},{default:u(()=>[l(s,{type:"submit",status:"primary",content:"提交"}),l(s,{content:"返回",onClick:C})]),_:1})]),_:1},8,["data","rules"])])]),_:1})]),_:1})}}};export{G as default};
