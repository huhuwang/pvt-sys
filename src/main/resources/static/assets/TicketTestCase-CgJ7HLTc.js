import{q as b,r as p,j as g,k as N,d as r,o as S,c as C,b as n,l as y,t as V,w as d,p as h,n as R,V as w}from"./index-DkAa4VJT.js";const E={__name:"TicketTestCase",setup(I){const v=b(),l=p(!1),m=p(),a=g({total:0,currentPage:1,pageSize:5}),u=async()=>{l.value=!0;const{pageSize:s,currentPage:e}=a;let o=p({});o.value.pageSize=s,o.value.pageNum=e,o.value.description=c.data.description,o.value.ticketNo=c.data.ticket,await R.post("case/page/ticket",o.value).then(t=>{a.total=t.totalRecordNum,m.value=t.data}).catch(t=>{w.modal.message({content:t,status:"error"})}).finally(()=>{l.value=!1})},f=({pageSize:s,currentPage:e})=>{a.currentPage=e,a.pageSize=s,u()},x=s=>{const e={caseId:s.id};v.push({name:"ticket-case-update",state:e})},c=g({data:{ticket:"",description:""},items:[{field:"ticket",title:"ticket",span:8,itemRender:{name:"VxeInput"}},{field:"description",title:"description",span:8,itemRender:{name:"VxeInput"}},{span:2,itemRender:{name:"VxeButtonGroup",options:[{type:"submit",content:"搜索",status:"primary"}]}}]}),_={submit(){a.currentPage=1,u()}};return N(()=>{u()}),(s,e)=>{const o=r("vxe-form"),t=r("vxe-column"),P=r("vxe-button"),k=r("vxe-table"),z=r("vxe-pager");return S(),C("div",null,[n(o,y(c,V(_)),null,16),n(k,{border:"","column-config":{resizable:!0},height:"650",loading:l.value,"row-config":{isCurrent:!0,isHover:!0},data:m.value},{default:d(()=>[n(t,{title:"ticketNo",field:"ticketNo"}),n(t,{title:"description",field:"description"}),n(t,{title:"summary",field:"summary"}),n(t,{title:"step",field:"step"}),n(t,{title:"expected result",field:"expectedResult"}),n(t,{title:"action",width:"100",fixed:"right"},{default:d(({row:i})=>[n(P,{mode:"text",onClick:T=>x(i)},{default:d(()=>e[2]||(e[2]=[h("修改")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["loading","data"]),n(z,{currentPage:a.currentPage,"onUpdate:currentPage":e[0]||(e[0]=i=>a.currentPage=i),pageSize:a.pageSize,"onUpdate:pageSize":e[1]||(e[1]=i=>a.pageSize=i),"page-sizes":[5,10,20,100],total:a.total,layouts:["Home","PrevJump","PrevPage","Number","NextPage","NextJump","End","Sizes","FullJump","Total"],onPageChange:f},null,8,["currentPage","pageSize","total"])])}}};export{E as default};
