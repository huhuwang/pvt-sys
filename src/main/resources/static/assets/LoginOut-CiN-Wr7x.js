import{q as i,r as u,k as p,d as m,o as g,c as _,p as l,s as a,b as v,w as d,n as N,V as h}from"./index-9ZKT_yQe.js";const U=n=>{if(typeof n!="string")throw new Error("Invalid token");try{const e=n.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(e).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch{throw new Error("Decode error")}},k={align:"right"},x={__name:"LoginOut",setup(n){const r=i(),e=u({account:null,loginName:null,roleName:null}),s=()=>{N.post("out",{}).then(o=>{sessionStorage.removeItem("case_token"),r.push({name:"login"})}).catch(o=>{h.modal.message({content:o,status:"error"})})};return p(()=>{const o=sessionStorage.getItem("case_token"),t=U(o);e.value.account=t.loginUser.pvtUser.account,e.value.loginName=t.loginUser.pvtUser.userName,e.value.roleName=t.loginUser.pvtUser.role.roleName}),(o,t)=>{const c=m("vxe-icon");return g(),_("div",k,[l(a(e.value.account)+" | "+a(e.value.loginName)+" | "+a(e.value.roleName)+" | ",1),v(c,{name:"square-close",onClick:s},{default:d(()=>t[0]||(t[0]=[l("退出")])),_:1})])}}};export{x as _};
