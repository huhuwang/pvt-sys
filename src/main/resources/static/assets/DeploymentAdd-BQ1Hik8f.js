import{r as p,k as g,f as q,w as o,n as x,V as c,d as n,o as E,b as e,a as C,q as U}from"./index-9ZKT_yQe.js";import{_ as k}from"./LoginOut-CiN-Wr7x.js";const w={__name:"DeploymentAdd",setup(D){const R=U(),_=p(),a=p({deploymentDate:"",applicationName:"IRECRUIT2.0",deploymentName:"IRECRUIT2.0 deployment",rtTemplate:{id:null}}),T=p({deploymentDate:[{required:!0,message:"this field is required"}],applicationName:[{required:!0,message:"this field is required"}],deploymentName:[{required:!0,message:"this field is required"}],rtTemplate:[{required:!0,message:"this field is required"},{validator(){if(!a.value.rtTemplate.id)return new Error("this field is required")}}]}),v=async()=>{const m=a.value.applicationName;a.value.rtTemplate.id=null,x.post("rt/query/with/application",{application:[m]}).then(t=>{const u=_.value;if(u){const s=[];for(let l=0;l<t.length;l++)s.push({value:`${t[l].id}`,label:`${t[l].templateName}-(created at ${t[l].createTime})`});u.reloadData(s)}}).catch(t=>{c.modal.message({content:t,status:"error"})})},I=()=>{x.post("deployment/add",a.value).then(m=>{c.modal.message({content:"保存成功",status:"success"}),R.push({name:"home-page"})}).catch(m=>{c.modal.message({content:m,status:"error"})})};return g(()=>{v()}),(m,t)=>{const u=n("vxe-layout-header"),s=n("vxe-date-picker"),l=n("vxe-form-item"),d=n("vxe-option"),f=n("vxe-select"),V=n("vxe-input"),y=n("vxe-button"),N=n("vxe-form"),h=n("vxe-layout-body"),b=n("vxe-layout-container");return E(),q(b,{vertical:""},{default:o(()=>[e(u,{fixed:"",style:{"background-color":"#a6c9ed"}},{default:o(()=>[e(k)]),_:1}),e(h,null,{default:o(()=>[C("div",null,[e(N,{vertical:"",data:a.value,rules:T.value,onSubmit:I},{default:o(()=>[e(l,{title:"发布日期",field:"deploymentDate",span:"24","item-render":{}},{default:o(i=>[e(s,{modelValue:a.value.deploymentDate,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value.deploymentDate=r),placeholder:"日期选择"},null,8,["modelValue"])]),_:1}),e(l,{title:"应用名称",field:"applicationName",span:"24","item-render":{}},{default:o(i=>[e(f,{modelValue:a.value.applicationName,"onUpdate:modelValue":t[1]||(t[1]=r=>a.value.applicationName=r),placeholder:"applicationName",size:"medium",onChange:v},{default:o(()=>[e(d,{value:"IRECRUIT2.0",label:"IRECRUIT2.0"}),e(d,{value:"IRECRUIT1.0",label:"IRECRUIT1.0"}),e(d,{value:"CAT",label:"CAT"}),e(d,{value:"AI INTERVIEW",label:"AI INTERVIEW"})]),_:1},8,["modelValue"])]),_:1}),e(l,{title:"发布名称",field:"deploymentName",span:"24","item-render":{}},{default:o(i=>[e(V,{modelValue:a.value.deploymentName,"onUpdate:modelValue":t[2]||(t[2]=r=>a.value.deploymentName=r)},null,8,["modelValue"])]),_:1}),e(l,{title:"RT模板",field:"rtTemplate",span:"24","item-render":{}},{default:o(i=>[e(f,{ref_key:"selectRef",ref:_,modelValue:a.value.rtTemplate.id,"onUpdate:modelValue":t[3]||(t[3]=r=>a.value.rtTemplate.id=r)},null,8,["modelValue"])]),_:1}),e(l,{align:"center",span:"24","item-render":{}},{default:o(()=>[e(y,{type:"submit",status:"primary",content:"提交"}),e(y,{content:"取消","router-link":{name:"home-page"}})]),_:1})]),_:1},8,["data","rules"])])]),_:1})]),_:1})}}};export{w as default};
